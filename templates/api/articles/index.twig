
{%- header "Content-Type: application/json" -%}


{% set results = craft.entries().section('article').with(['heroImage']).all() %}
{% set result = [] %}

{% for r in results %}
    {% set obj = {
        'difficulty':r.difficulty,
        'title': r.title,
        'url': r.url,
        'slug': r.slug,
        'location': r.place,
        'region': r.region,
        'type': r.parkType,
        'thumbnail': get_image_from_media(r.heroImage, 800, 450),
        'date': r.postDate,
    } %}
    {% set result = result | merge([obj]) %}
{% endfor %}

{{ result | json_encode | raw }}